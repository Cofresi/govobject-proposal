<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>govobject-proposal</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.0/themes/smoothness/jquery-ui.css">

    <script src="https://code.jquery.com/jquery-3.1.0.js" integrity="sha256-slogkvB1K3VOkzAI8QITxV3VzpOnkeNVsKvtkYLMjfk=" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.0/jquery-ui.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <script src="bitcore-lib-dash.js"></script>

    <script type="text/javascript">

        var Bitcore = require('bitcore-lib-dash');

        $(document).ready(function() {

            var opts = { dateFormat: "@" }; // unix date format

            $('#start_epoch').datepicker(opts);
            $('#end_epoch').datepicker(opts);

            $('#dataHex').click(function() {
               copyToClipboard($(this).attr('id'));
            });

            $('#prepareProposal').click(function() {
                copyToClipboard($(this).attr('id'));
            });

            $('#submitProposal').click(function() {
                copyToClipboard($(this).attr('id'));
            });

            $('#formSubmit').click(function() {

                var gov = new Bitcore.GovObject.Proposal();

                gov.end_epoch = document.getElementById('end_epoch').value || null;
                gov.payment_address = document.getElementById('payment_address').value;
                gov.payment_amount = parseFloat(document.getElementById('payment_amount').value);
                gov.name = document.getElementById('name').value;
                gov.start_epoch = document.getElementById('start_epoch').value || null;
                gov.type = parseInt(document.getElementById('type').value);
                gov.url = document.getElementById('url').value;

                document.getElementById('dataHex').innerHTML = gov.uncheckedSerialize();

                document.getElementById('prepareProposal').innerHTML = "dash-cli gobject submit "+document.getElementById('parentHash').value+" "+document.getElementById('revision').value+" "+document.getElementById('time').value+" "+gov.uncheckedSerialize();

                if (document.getElementById('feeTxid').value) {
                    document.getElementById('submitProposal').innerHTML = "dash-cli gobject submit " + document.getElementById('parentHash').value + " " + document.getElementById('revision').value + " " + document.getElementById('time').value + " " + gov.uncheckedSerialize() + " " + document.getElementById('feeTxid').value;
                }

            });
        });

        function copyToClipboard(id)
        {
            document.getElementById(id).select();
            document.execCommand('copy');
        }

    </script>

    <style type="text/css">
        textarea { background-color:#fafafa !important; }
    </style>

</head>
<body>

<div class="col-xs-10 col-xs-offset-1">

    <div class="row" style="margin-top:2em;">
        <div class="col-xs-12"><h1>Budget Proposal</h1></div>
    </div>

    <div class="row" style="margin-top:1em;">
        <div class="col-xs-6">

            <form>

                <div class="form-group">
                    <label for="name">name:</label>
                    <input type="text" class="form-control" id="name" value="我想喝一點點無龍茶" placeholder="我想喝一點點無龍茶">
                </div>

                <div class="form-group">
                    <label for="url">url:</label>
                    <input type="text" class="form-control" id="url" value="blah.com" placeholder="blah.com">
                </div>

                <div class="form-group">
                    <label for="payment_address">payment_address:</label>
                    <input type="text" class="form-control" id="payment_address" value="yTC62huR4YQEPn9AJHjnQxxreHSbgAoatV" placeholder="yTC62huR4YQEPn9AJHjnQxxreHSbgAoatV">
                </div>

                <div class="form-group">
                    <label for="payment_amount">payment_amount:</label>
                    <input type="text" class="form-control" id="payment_amount" value="39.23" placeholder="39.23">
                </div>

                <div class="form-group">
                    <label for="start_epoch">start date:</label>
                    <input type="text" class="form-control" id="start_epoch" value="" placeholder="">
                </div>

                <div class="form-group">
                    <label for="end_epoch">end date:</label>
                    <input type="text" class="form-control" id="end_epoch" value="" placeholder="">
                </div>

                <div class="form-group" style="display:none;">
                    <label for="type">type:</label>
                    <input type="text" class="form-control" id="type" value="1" placeholder="1">
                </div>

                <div type="submit" class="btn btn-primary" id="formSubmit">Create Proposal</div>

            </form>

        </div>

        <div class="col-xs-6">

            <form>

                <div class="form-group">
                    <label for="parentHash">parent-hash:</label>
                    <input type="text" class="form-control" id="parentHash" value="0" placeholder="0">
                </div>

                <div class="form-group">
                    <label for="revision">revision:</label>
                    <input type="text" class="form-control" id="revision" value="1" placeholder="1">
                </div>

                <div class="form-group">
                    <label for="time">time:</label>
                    <input type="text" class="form-control" id="time" value="1474049452" placeholder="1474049452">
                </div>

                <div class="form-group">
                    <label for="feeTxid">fee-txid:</label>
                    <input type="text" class="form-control" id="feeTxid" value="" placeholder="<fee-txid>">
                </div>

            </form>

        </div>

    </div>

    <div class="row" style="margin-top:2em;">

        <div class="col-xs-6">

            <form>

                <div class="form-group">
                    <label for="dataHex">data-hex:</label>
                    <textarea class="form-control" id="dataHex" rows="6" placeholder=""></textarea>
                </div>

            </form>

        </div>

        <div class="col-xs-6">

            <form>

                <div class="form-group">
                    <label for="prepareProposal">prepare proposal:</label>
                    <textarea class="form-control" id="prepareProposal" rows="4" placeholder=""></textarea>
                </div>

                <div class="form-group">
                    <label for="submitProposal">submit proposal:</label>
                    <textarea class="form-control" id="submitProposal" rows="4" placeholder=""></textarea>
                </div>

            </form>

        </div>

    </div>

</div>

</body>
</html>
